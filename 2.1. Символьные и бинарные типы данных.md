# 2.1. Символьные и бинарные типы данных

В предыдущем модуле мы обсуждали, что для реляционной БД характерно хранение данных в таблицах, в столбцах которых хранится информация определенного типа данных. Например, при создании таблицы "Поставщики" указываем, что в столбце "Идентификатор" хранятся только числа. В случае, если пользователь начнет туда вносить текст, то СУБД нам выдаст ошибку.

<image src="/img/2.1. pic1.png" alt="">

На следующих шагах разберем основные символьные типы данных, которые можно указывать при создании объектов в СУБД MySQL.
<br>
<br>

## CHAR(<количество символов>)

<количество символов> _- может быть любым значением от 0 до 255._

В столбцах с типом CHAR могут храниться строки фиксированной длины, которая дополняется пробелами до значения **_<количество символов>_**. Тип CHAR может хранить до 255 байт.

Например, столбец Наименование в таблице Поставщики объявили с типом данных char(12), это означает , что поле будет всегда содержать 12 символов информации, вне зависимости от длины текста.

❗️ _**1 **с**имвол НЕ РАВНО 1 байт. В зависимости от установленной кодировки и используемого алфавита 1 символ может занимать больше 1 байта.**_ Начиная с MySQL 5.6 типы CHAR и VARCHAR по умолчанию используют кодировку _**UTF-8**_, которая позволяет использовать до 3 байт для хранения символа в зависимости от языка ( для многих европейских языков по 1 байту на символ, для ряда восточно-европейских и ближневосточных - 2 байта, а для китайского, японского, корейского - по 3 байта на символ).

Столбец с типом char(12), содержащий слово _Привет,_ занимает объем памяти, как на картинке:

<image src="/img/2.1. pic2.png" alt="">
<br>
<br>

## VARCHAR(<количество символов>)

<количество символов> _- может быть любым значением от 0 до 65535._

В столбцах с типом VARCHAR могут храниться строки переменной длины, отличающиеся от типа CHAR тем, что не дополняется пробелами до максимальной длины. Максимальный размер до 65535 байт.

Например, столбец Наименование в таблице Поставщики объявили с типом данных varchar(12), это означает , что поле будет содержать максимум 12 символов информации.

В отличие от CHAR, значения VARCHAR cохранены как 1 или 2-байтовая приставка длины плюс данные. Приставка длины указывает на число байтов в значении. Столбец использует длину в один байт, если значение требует не больше, чем 255 байтов, и два байта, если значения могут потребовать больше 255 байтов.

Столбец с типом varchar(12), содержащий слово _Привет,_ занимает объем памяти, как на картинке:

<image src="/img/2.1. pic3.png" alt="">
<br>
<br>

## В каких случаях используют CHAR, в каких VARCHAR?

Рассмотрим на двух примерах, когда выгоднее использовать CHAR, а когда VARCHAR.

1) Если нам необходимо создать таблицу с полем, в котором будут храниться _**строки одинаковой длины**_. Например, будем хранить флаг, который содержит только значения Y или N (да или нет). Создадим таблицу с этим полем и запишем туда 7 значений, как на картинке ниже.

Так как максимальная длина строк равна 1, то подсчитаем объем памяти для двух вариантов: с типом CHAR(1) и типом VARCHAR(1).

<image src="/img/2.1. pic4.png" alt="">

По картинке видно, что в данном случае "выгоднее" использовать **CHAR**(1), потому что данные займут в памяти меньше места.

2) Если нам необходимо создать таблицу с полем, в котором будут храниться _**строки переменной длины**_. Например, будем хранить некое текстовое поле с описанием товара. Создадим таблицу с этим полем и запишем туда 7 значений, как на картинке ниже.

Так как максимальная длина строк равна 23, то подсчитаем объем памяти для двух вариантов: с типом CHAR(23) и типом VARCHAR(23).

<image src="/img/2.1. pic5.png" alt="">

По картинке видно, что в данном случае "выгоднее" использовать **VARCHAR**(23), потому что данные займут в памяти меньше места.

Таким образом, можно сделать вывод, что CHAR оптимальнее использовать, если все значения в столбце имеют одинаковую длину, а VARCHAR для строк переменной длины.
<br>
<br>

## Типы BINARY(<количество байт>) и VARBINARY(<количество байт>)

Типы данных BINARY и VARBINARY аналогичны CHAR и VARCHAR , только они хранят двоичные строки. 

Тип BINARY  с фиксированной длиной, строки дополняются нулевым байтом до максимальной длины. При записи строки "sql" в столбец с типом BINARY, храниться он будет в следующем виде:

<image src="/img/2.1. pic6.png" alt="">

VARBINARY хранит строки переменной длины, поэтому дополняться нулевыми байтами не будет.
<br>
<br>

## BLOB и TEXT

**_BLOB_** используется для хранения больших бинарных данных, таких как картинки. _**TEXT**_ предназначен также для хранения больших данных, но текстового содержания.

Есть четыре типа **_BLOB_**: **_TINYBLOB, BLOB, MEDIUMBLOB и LONGBLOB_**. Они отличаются только по максимальной длине значений, которые они могут содержать. Им соответствуют четыре типа _**TEXT: TINYTEXT, TEXT, MEDIUMTEXT и LONGTEXT.**_ Максимальный объем памяти для данных типов представлен в таблице ниже.

<image src="/img/2.1. pic7.png" alt="">
<br>
<br>

### _**Какой объем памяти (в байтах) займет строка размером 15 байт, если поле имеет тип данных varchar(100)?**_

Введите численный ответ: 16
<br>
<br>

### _**Какой объем памяти (в байтах) займет строка размером 15 байт, если поле имеет тип данных char(100)?**_

Введите численный ответ: 100
<br>
<br>

### _**В таблице создали поле с описанием со следующим типом данных:**_

|   |
|---|
|tinytext|

_**Какие данные без ошибки мы сможем хранить в данном поле?**_
<br>
<br>

 -  [ ] Текст длиной в 255 символов, размером в 325 байт
 -  [x] Текст длиной в 255 символов, размером в 255 байт
 -  [x] Текст длиной в 125 символов, размером в 250 байт
 -  [ ] Текст длиной в 125 символов, размером в 375 байт
<br>
<br>

### _**В таблице создали поле с кодом со следующим типом данных:**_

|   |
|---|
|varchar(45)|

_**Сколько байт займет текст "Пушкин" при двухбайтном наборе символов (1 символ - 2 байта)?**_
<br>
<br>

 -  [ ] 46
 -  [ ] 12
 -  [ ] 45
 -  [x] 13



К строковым типам также относятся типы ENUM и SET, но в рамках данного курса ограничимся определением:

**ENUM** строковый объект со значением, выбранным из списка разрешенных значений, которые перечислены явно в спецификации столбца при создании таблицы.

**SET** строковый объект, у которого может быть ноль или больше значений, каждое из которых должно быть выбрано из списка разрешенных значений, определенных, когда таблица составлена.
