# 4.3. Операторы ORDER BY, LIMIT

## ORDER BY <выражение> [ ASC | DESC ]

Используется для сортировки результатов запроса. После ключевого слова _**ORDER BY**_ перечисляются выражения, по которым сортируется результат запроса. В качестве выражения могут быть столбцы, выражения над столбцами (в том числе и не входящими в список выборки), номер столбца.

После выражения может быть одно из ключевых слов - ASC или DESC. Они задают порядок сортировки - ASC (ascending по возрастанию) или DESC (descending по убыванию). По умолчанию используется сортировка ASC по возрастанию.

Можно перечислить несколько выражений через запятую, тогда если будет несколько одинаковых значений первого выражения, то выборка будет отсортирована по второму выражению и т.д.
<br>

Отсортируем пациентов по полу:

```sql
SELECT * FROM patients
ORDER BY sex ASC;
```
<br>

Результат:

<image src="/img/4.3. pic1.png" alt="">
<br>
<br>

После _**ORDER BY**_ указан столбец, по которому происходит сортировка - _**sex**_. После столбца указан оператор порядка сортировки - ASC - по возрастанию. Следовательно, запрос вернет все строки, отсортированные по значению поля _**sex**_, сначала строки со значением 'ж', потом все строки со значением 'м' (по возрастанию в алфавитном порядке).

! так как по умолчанию у нас сортировка происходит по возрастанию (ASC), то оператор ASC можно не указывать. Следующий запрос будет эквивалентен предыдущему:

```sql
SELECT * FROM patients
ORDER BY sex;
```
<br>
<br>

Разберем следующий пример: 

```sql
SELECT full_name, sex, birth_date
FROM patients
ORDER BY 2, 3 DESC;
```

После ORDER BY перечислены номера столбцов для сортировки. Нумеруются поля, указанные после SELECT, соответственно запрос будет эквивалентен следующему:

```sql
SELECT full_name, sex, birth_date
FROM patients
ORDER BY sex ASC, birth_date DESC;
```

Сортировка будет произведена по полю _**sex**_ в порядке возрастания и вторично по полю **_birth_date_** в порядке убывания.

Результат:

<image src="/img/4.3. pic2.png" alt="">
<br>
 
Значения NULL в MySQL считаются минимальными. При сортировке по возрастанию - они оказываются в начале выборки, при сортировке по убыванию - в конце результирующей выборки.
<br>
<br>

### _**Заполните пробел в запросе:**_

```sql
SELECT spec FROM doctors
ORDER BY spec ____;
```
<br>

_**чтобы результат выборки был следующий:**_

<image src="/img/4.3. pic3.png" alt="">
<br>

Исходная таблица:

<image src="/img/4.3. pic4.png" alt="">
<br>
<br>

 -  [x] DESC
 -  [ ] , DOCTOR_NUM
 -  [ ] ASC
<br>
<br>

### **_Вывести список названий существующих специализаций врачей в алфавитном порядке._**

Исходная таблица **_doctors_**:

<image src="/img/4.3. pic5.png" alt="">
<br>
<br>

```sql
SELECT DISTINCT spec
FROM doctors
ORDER BY spec
```
<br>
<br>
<br>

### **_Вывести список пациентов (все поля), отсортировав его по возрастанию даты рождения._**

Исходная таблица _**patients**_:

<image src="/img/4.3. pic6.png" alt="">
<br>
<br>

```sql
SELECT *
FROM patients
ORDER BY birth_date
```
<br>
<br>
<br>

### **_Вывести список пациентов(все поля), отсортировав его по возрастанию номера участка и по убыванию даты рождения._**

Исходная таблица _**patients**_:

<image src="/img/4.3. pic7.png" alt="">
<br>
<br>

```sql
SELECT *
FROM patients
ORDER BY area_num ASC, birth_date DESC
```
<br>
<br>
<br>

## LIMIT <количество строк>

Используется для ограничения количества возвращаемых записей на основе предельного значения.  

LIMIT 10 вернет первые 10 строк, соответствующих критериям SELECT. В этом случае порядок сортировки имеет значение, поэтому обязательно используйте оператор ORDER BY соответствующим образом.

Например, следующий запрос вернет первые три строки из отсортированного по дате посещения списка:

```sql
SELECT * FROM talons
ORDER BY visit_time
LIMIT 3;
```
<br>

Результат:

<image src="/img/4.3. pic8.png" alt="">
<br>
<br>
<br>

### **_Выведите информацию (все поля) о двух первых хранимых записях о врачах._**

Исходная таблица **_doctors:_**

<image src="/img/4.3. pic9.png" alt="">
<br>
<br>

```sql
SELECT *
FROM doctors
LIMIT 2
```
<br>
<br>
<br>

### **_Выведите информацию (все поля) о трех самых молодых пациентах._**

Исходная таблица **_patients:_**

<image src="/img/4.3. pic10.png" alt="">
<br>
<br>

```sql
SELECT *
FROM patients
ORDER BY birth_date DESC
LIMIT 3
```
