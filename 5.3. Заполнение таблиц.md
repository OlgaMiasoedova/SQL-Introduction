# 5.3. Заполнение таблиц

_**На данном этапе заполним таблицы данными.**_

! В связи с особенностями интерактивных задач SQL в stepik'е для корректного решения необходимо указывать **название таблиц** при вставке, обновлении и выборках в **нижнем регистре** (в инициализирующем скрипте таблицы созданы в нижнем регистре**)**, например:
<br>

✅Вот так правильно:

```sql
INSERT INTO readers...
```
<br>

⛔️ Так будет ошибка:

```sql
INSERT INTO Readers...
```
<br>
<br>
<br>

### _**Заполним таблицу readers следующими данными:**_

_**( ! Учтите, что**_ **_reader_num_** _**объявлен как**_ **_AUTO_INCREMENT_**_**)**_
<br>

|**reader_num**|**reader_name**|**reader_adress**|**reader_phone**|
|---|---|---|---|
|1|Сидоров|ул. Ленина, 5а|4424556|
|2|Ванюшкин|ул. Космонавтов, д. 31, кв. 143|4545222|
|3|Дроздов|ул. Ленина, д. 3, кв. 13|8955454|
|4|Голубева|ул. Тимирязева, д. 35, кв. 18|5454555|
|5|Шишкин|ул. Революции, д. 16/7, кв. 45|454564564|
|6|Книголюбова|ул. Пушкина, д. 38|54664545|
|7|Петров|ул. Пушкина, д. 31, кв. 16|6115646|
|8|Паринова|null|46488484|
|9|Птичкина|ул. Зеленая, д. 3/7|65545445|
|10|Дроздов|ул. Конструкторов, д. 89, кв. 14|546544|
<br>
<br>

```sql
INSERT INTO readers
(reader_name, reader_adress, reader_phone)
VALUES ('Сидоров', 'ул. Ленина, 5а', 4424556),
('Ванюшкин', 'ул. Космонавтов, д. 31, кв. 143', 4545222),
('Дроздов', 'ул. Ленина, д. 3, кв. 13', 8955454),
('Голубева', 'ул. Тимирязева, д. 35, кв. 18', 5454555),
('Шишкин', 'ул. Революции, д. 16/7, кв. 45', 454564564),
('Книголюбова', 'ул. Пушкина, д. 38', 54664545),
('Петров', 'ул. Пушкина, д. 31, кв. 16', 6115646),
('Паринова', null, 46488484),
('Птичкина', 'ул. Зеленая, д. 3/7', 65545445),
('Дроздов', 'ул. Конструкторов, д. 89, кв. 14', 546544);
```
<br>
<br>
<br>

### _**Заполним таблицу books следующими данными:**_

_**( ! Учтите, что**_ **_book_num_** _**объявлен как**_ **_AUTO_INCREMENT_**_**)**_
<br>

|book_num|book_author|book_name|book_count|
|---|---|---|---|
|1|Толстой|Война и мир|15|
|2|Достоевский|Идиот|13|
|3|Пушкин|Евгений Онегин|18|
|4|Пушкин|Руслан и Людмила|5|
|5|Пушкин|Медный всадник|11|
|6|Барто|Стихи детям|1|
|7|Чехов|Вишневый сад|8|
|8|Чехов|Дядя Ваня|7|
|9|Тургенев|Отцы и дети|13|
|10|Тургенев|Муму|4|
<br>
<br>

```sql
INSERT INTO books (book_author, book_name, book_count)
VALUES 
	('Толстой',	'Война и мир'	,15),
	('Достоевский'	,'Идиот'	,13),
	('Пушкин',	'Евгений Онегин'	,18),
	('Пушкин',	'Руслан и Людмила'	,5),
	('Пушкин',	'Медный всадник'	,11),
	('Барто',	'Стихи детям'	,1),
	('Чехов',	'Вишневый сад',	8),
	('Чехов'	,'Дядя Ваня'	,7),
	('Тургенев',	'Отцы и дети'	,13),
	('Тургенев',	'Муму'	,4);
```
<br>
<br>
<br>

### _**Заполним таблицу books_in_use следующими данными:**_

_**( ! Для заполнения books_in_use используйте DEFAULT-значения для столбцов**_ **return_period** **и** **fine_amount,** _**а не явное заполнение числами)**_
<br>

|reader_num|book_num|issue_date|return_date|return_period|fine_amount|
|---|---|---|---|---|---|
|1|1|2023-09-15|2023-10-17|14|0|
|1|8|2023-10-17|null|14|0|
|2|1|2023-10-04|2023-10-16|14|0|
|3|2|2023-09-11|2023-09-30|14|0|
|3|4|2023-09-11|2023-09-30|14|0|
|3|5|2023-09-11|2023-09-30|14|0|
|4|1|2023-09-28|2023-10-05|14|0|
|4|3|2023-09-28|2023-10-05|14|0|
|4|8|2023-10-05|2023-10-31|14|0|
|5|6|2023-09-14|2023-10-14|14|0|
|6|1|2023-09-09|2023-09-20|14|0|
|6|1|2023-09-20|2023-10-01|14|0|
|7|1|2023-09-13|2023-09-21|14|0|
|7|7|2023-09-21|2023-10-20|14|0|
|8|7|2023-09-11|null|14|0|
<br>
<br>

```sql
INSERT INTO books_in_use (reader_num, book_num, issue_date, return_date)
VALUES   
(1,	1,	'2023-09-15'	,'2023-10-17'),
(1,	8,	'2023-10-17'	,null	),
(2,	1,	'2023-10-04'	,'2023-10-16'),
(3,	2,	'2023-09-11'	,'2023-09-30'	),
(3,	4,	'2023-09-11'	,'2023-09-30'	),
(3,	5,	'2023-09-11'	,'2023-09-30'	),
(4,	1,	'2023-09-28'	,'2023-10-05'	),
(4,	3,	'2023-09-28'	,'2023-10-05'),
(4,	8,	'2023-10-05'	,'2023-10-31'	),
(5,	6,	'2023-09-14'	,'2023-10-14'	),
(6,	1,	'2023-09-09'	,'2023-09-20'	),
(6,	1,	'2023-09-20'	,'2023-10-01'	),
(7,	1,	'2023-09-13'	,'2023-09-21'	),
(7,	7,	'2023-09-21'	,'2023-10-20'	),
(8,	7	,'2023-09-11'	,null	);
```
<br>
<br>
<br>

### _**Заполните столбец fine_amount (сумма штрафа) в таблице books_in_use следующим образом:**_

- За каждый день просрочки (дни, которые превышают return_period) начисляется штраф в размере 8,45 р. 

- Количество дней просрочки определяется как разница между Датой возврата книги и Датой выдачи 

- Если дата возврата не заполнена, значит книга еще в использовании, штраф не начисляем.

Исходная таблица books_in_use :

<image src="/img/5.3. pic1.png" alt="">
<br>

_! Для получения разницы между датами используйте функцию DATEDIFF_
<br>
<br>

```sql
UPDATE books_in_use
SET fine_amount = IF(DATEDIFF(return_date, issue_date) > return_period,  DATEDIFF(return_date, issue_date) - return_period, 0) * 8.45
WHERE return_date IS NOT NULL;
```
<br>
<br>
<br>

 Таблица _**books**_ должна иметь следующий вид:

<image src="/img/5.3. pic2.png" alt="">
<br>
<br>

Таблица **_readers_**:

<image src="/img/5.3. pic3.png" alt="">
<br>
<br>

После обновления столбца **_Сумма штрафа_** таблица **_books_in_use_** будет иметь следующий вид:

<image src="/img/5.3. pic4.png" alt="">
